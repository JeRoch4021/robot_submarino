<!DOCTYPE html>
<html lang="es">
    <head>
        <title>Interfaz MPU6050</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="estilos.css">
    </head>
    <body>
        <h1>Interfaz MPU6050</h1>
        <div id="modelo3D">
            <div class="modelo">
                <!-- Representación simple del modelo 3D -->
                <div class="cubo"></div>
            </div>
        </div>
        <div class="container">
            <div class="data-section">
                <h2>Acelerómetro</h2>
                <p>X: <span id="accel-x">0</span></p>
                <p>Y: <span id="accel-y">0</span></p>
                <p>Z: <span id="accel-z">0</span></p>
            </div>
            <div class="data-section">
                <h2>Giroscopio</h2>
                <p>X: <span id="gyro-x">0</span></p>
                <p>Y: <span id="gyro-y">0</span></p>
                <p>Z: <span id="gyro-z">0</span></p>
            </div>
            <div class="data-section">
                <h2>Sensor Temperatura (DHT11)</h2>
                <p>Temperatura: <span id="dht11-temperature">0</span></p>
                <p>Humedad: <span id="dht11-humidity">0</span></p>
            </div>
             <div class="data-section">
                <h2>Sensor PH</h2>
                <p>PH: <span id="ph-data">0</span></p>
            </div>
        </div>
        <script>
            async function fetchData() {
                try {
                    const response = await fetch('/mpu6050/data');
                    const data = await response.json();
                    
                    document.getElementById('accel-x').textContent = data.accel_x;
                    document.getElementById('accel-y').textContent = data.accel_y;
                    document.getElementById('accel-z').textContent = data.accel_z;
                    document.getElementById('gyro-x').textContent = data.gyro_x;
                    document.getElementById('gyro-y').textContent = data.gyro_y;
                    document.getElementById('gyro-z').textContent = data.gyro_z;
                } catch (error) {
                    console.error('Error fetching MPU6050 data:', error);
                }
            }

            setInterval(fetchData, 1000);
            fetchData();

            async function actualizarModelo3D() {
                try {
                    const response = await fetch('/mpu6050/orientation');
                    const data = await response.json();
                    
                    const modelo = document.querySelector('.modelo');
                    modelo.style.transform = `rotateX(${data.pitch}deg) rotateY(${data.roll}deg) rotateZ(${data.yaw}deg)`;
                } catch (error) {
                    console.error('Error fetching orientation data:', error);
                }
            }

            setInterval(actualizarModelo3D, 1000);
            actualizarModelo3D();
        </script>
    </body>
</html>